# 查看报表页面需求文档

## 一、页面结构

报表页面整体分为以下区域：
1. 顶部标题区：显示报表名称和描述。
2. Tabs区：一个报表可能包含有多个tab
3. 每一个Tab中的内容：
   - Filter区：动态渲染当前Tab中所配置的filter组件，所有筛选项水平排列。每个筛选项布局为上下两行，上行为label，下行为组件。
     - 维度类型与组件映射：
       - `singleSelect`：单选下拉框
       - `multiSelect`：多选下拉框
       - `text`：文本输入框
       - `date`：日期区间选择（Date Range组件）
      - Apply按钮：始终固定在Filter区的右下角。
   - Chart区：使用ECharts渲染折线图，x轴为日期，y轴为指标值。可能含有多个chart。

## 二、数据获取与交互流程

1. 页面加载时，根据路由参数中的dashboard id，调用服务端API获取报表详情（见服务端报表API文档3.1）。
2. 默认显示第一个tab中的内容。
3. 前端根据返回的filter数组渲染对应的筛选组件。
4. 页面初次加载和切换tab时，自动根据当前筛选条件（初始值）请求所有chart的数据并渲染，无需等待用户点击Apply按钮。
5. 用户选择筛选条件后，点击"Apply"按钮，前端将所有筛选条件组装为payload，调用服务端API获取每个chart的时间序列数据（见服务端报表API文档3.2）。
6. 服务端返回的时间序列数据用于渲染ECharts折线图。

## 三、开发要求

1. 根据你的设计，你可以选择引入redux或者不引入。
2. Filter区组件请勿使用Form表单实现，需手动管理各筛选项的state。
3. Apply按钮始终位于Filter区右下角。
4. 代码需保证良好的可维护性和可扩展性。
5. 需处理接口请求失败、加载中、无数据等状态。
6. Chart区布局使用react-grid-layout，但在报表查看页面禁止拖拽和缩放，用户只能查看chart数据。
7. 你不需要考虑响应式。

